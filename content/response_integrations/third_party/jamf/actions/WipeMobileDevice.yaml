name: Wipe Mobile Device
description: Remotely erase/wipe a managed mobile device using Jamf Pro ERASE_DEVICE MDM command.
script: WipeMobileDevice.py
type: containment
integration_identifier: Jamf
timeout_seconds: 300
parameters:
  - name: Mobile Device ID
    type: string
    description: The ID of the mobile device to erase (required)
    is_mandatory: true
    default_value: ""
  - name: Preserve Data Plan
    type: boolean
    description: Whether to preserve the data plan on a mobile device with eSIM functionality, if one exists. This value is available in iOS 11 and later.
    is_mandatory: false
    default_value: false
  - name: Disallow Proximity Setup
    type: boolean
    description: Whether to disable Proximity Setup on the next reboot and skip the pane in Setup Assistant. This value is available in iOS 11 and later. Prior to iOS 14, do not use this option with any other option.
    is_mandatory: false
    default_value: false
  - name: Return to Service
    type: boolean
    description: Whether to enable return to service after erase (requires MDM profile data)
    is_mandatory: true
    default_value: false
  - name: MDM Profile Data
    type: string
    description: Base64-encoded MDM profile data for return to service (optional, only used if Return to Service is enabled)
    is_mandatory: false
    default_value: ""
  - name: WiFi Profile Data
    type: string
    description: Base64-encoded WiFi profile data for return to service (optional, only used if Return to Service is enabled)
    is_mandatory: false
    default_value: ""
  - name: Bootstrap Token
    type: string
    description: Base64 encoded bootstrap token for the device (optional, only used if Return to Service is enabled)
    is_mandatory: false
    default_value: ""
dynamic_results_metadata:
  - result_name: JsonResult
    show_result: true
    result_example: |
      {
        "erase_command_result": [
          {
            "id": "1",
            "href": "https://yourJamfProUrl.jamf/api/v1/resource/1"
          }
        ],
        "command_details": {
          "mobile_device_id": "12345",
          "command_type": "ERASE_DEVICE",
          "preserve_data_plan": false,
          "disallow_proximity_setup": false,
          "return_to_service": false,
          "mdm_profile_provided": true,
          "wifi_profile_provided": false,
          "bootstrap_token_provided": false,
          "timestamp": 1641234567,
          "status": "initiated"
        }
      }