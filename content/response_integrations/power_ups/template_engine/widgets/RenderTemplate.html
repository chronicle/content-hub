<!-- Custom Widget / Integration Version when it was updated 19.0 -->
<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700,700i" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css?family=Source Sans Pro" rel="stylesheet"/>
  <title>
   Template Engine - Render Template
  </title>
  <style>
   /* Root Variables */
    :root {
      --widget-bg: rgb(33, 44, 68);
      --widget-font-family: 'Source Sans Pro', sans-serif;
      --widget-text-color: rgb(255, 255, 255);
      --widget-scrollbar-size: 12px;
      --widget-row-highlight-bg: rgb(47 61 91);

      /*Logo styles*/
      --logo-size: 48px;
      --logo-color: rgb(255, 255, 255);
      /*Logo styles*/

      --list-item-key-font: 600 14px/18px var(--widget-font-family);
      --list-item-value-font: 400 14px/18px var(--widget-font-family);

      /*Table styles*/
      --table-color-even-row: rgb(26 32 50);
      --table-title-size: 600 14px/18px var(--widget-font-family);
      --table-th-size: 600 14px/18px var(--widget-font-family);
      --table-td-size: 400 14px/18px var(--widget-font-family);
    }

    /*Normalize CSS */
    * {
      margin: 0;
      padding: 0;
      outline: none;
      box-sizing: border-box;
    }

    *:hover, *:focus, *:active {
      outline: none;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      border-spacing: 0;
    }

    ol, ul {
      list-style: none;
    }

    button,
    input,
    textarea {
      font-family: inherit;
      background: transparent;
      border: 0;
      color: inherit;
      text-align: left;
    }

    button, a[href] {
      cursor: pointer;
    }

    /*Normalize CSS */


    /* Custom Scrollbar */
    ::-webkit-scrollbar {
      width: 18px;
      height: 18px;
    }

    ::-webkit-scrollbar-thumb {
      background: rgba(137, 151, 180, 1);
      border: 6px solid var(--widget-bg);
      border-radius: 63px;
    }

    ::-webkit-scrollbar-track {
      background: transparent;
      border: 4px solid transparent;
      border-radius: 44px;
    }

    ::-webkit-scrollbar-corner {
      background-color: transparent;
      border-color: transparent;
    }

    body {
      font-family: var(--widget-font-family), serif;
      color: var(--widget-text-color);
      background-color: var(--widget-bg) !important;
      overflow: hidden;
      width: 100vw !important;
      display: block !important;
      margin: 0 !important;
      padding: 0 !important;
    }

    /*Global styles*/
    .text-ellipsis {
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    .divider-border-style {
      border: 0;
      border-color: var(--divider-border-colcor);
      border-style: solid;
    }

    .input {
      border: 1px solid #6275A3;
      border-radius: 4px;
      padding: 4px 8px;
      background-color: transparent;
      font-size: 14px;
      color: var(--widget-text-color);
    }

    .input::placeholder {
      color: var(--widget-text-color);
    }

    /*Global styles*/

    .wrapper {
      width: 100% !important;
      height: 100vh;
      display: flex;
      flex-direction: column;
      position: relative;
    }

    .logo {
      min-width: var(--logo-size);
      min-height: var(--logo-size);
      max-width: var(--logo-size);
      max-height: var(--logo-size);
      color: var(--logo-color);
      position: absolute;
      top: 3px;
      right: 20px;
      z-index: 100;
    }

    .main-content {
      flex: 1;
      overflow: auto;
      padding-right: 74px;
      padding-left: 20px;
      padding-top: 20px;
    }

    .theme-aware-content {
      color: var(--widget-text-color);
    }

  </style>
 </head>
 <body>
  <div class="wrapper">
   <svg class="logo" data-name="Layer 1" fill="currentColor" id="Layer_1" viewbox="0 0 25 25" xmlns="http://www.w3.org/2000/svg">
    <path d="M4.46,2H20.54A2.46,2.46,0,0,1,23,4.46V20.54A2.46,2.46,0,0,1,20.54,23H4.46A2.46,2.46,0,0,1,2,20.54V4.46A2.46,2.46,0,0,1,4.46,2Zm5.46,8.75h1.91v1.71H9.92V20H8V12.46H6V10.75H8V7.84A3,3,0,0,1,11.19,5h1.4V6.7h-1.4A1.21,1.21,0,0,0,9.92,7.84ZM19,13.91,16.66,17,19,20H16.67L15.5,18.48,14.34,20H12l2.32-3L12,13.91h2.32l1.18,1.54,1.18-1.54Z" fill-rule="evenodd">
    </path>
   </svg>
   <section class="main-content" id="mainContent">
   </section>
  </div>
  <script>
    // JSON placeholder [{stepInstanceName}.JsonResult]
    const resultData = [{stepInstanceName}.JsonResult];
    const mainContent = document.getElementById('mainContent');

    if (resultData && resultData.html_output) {
        mainContent.classList.add('theme-aware-content');
        mainContent.innerHTML = resultData.html_output;

        // Smart theme adaptation: Remove white (or near-white) backgrounds and invert black (or near-black) text
        try {
            const allElements = mainContent.querySelectorAll('*');

            const parseRgb = (colorStr) => {
                const match = colorStr.match(/\d+/g);
                if (!match || match.length < 3) return null;
                return { r: parseInt(match[0]), g: parseInt(match[1]), b: parseInt(match[2]), a: match[3] ? parseFloat(match[3]) : 1 };
            };

            const isNearWhite = (color) => color && color.r > 225 && color.g > 225 && color.b > 225 && color.a > 0.1;
            const isNearBlack = (color) => color && color.r < 90 && color.g < 90 && color.b < 90 && color.a > 0.1;
            const isTransparent = (color) => color && color.a === 0;

            allElements.forEach(el => {
                const style = window.getComputedStyle(el);
                const bgColor = parseRgb(style.backgroundColor);
                const color = parseRgb(style.color);

                const bgIsWhite = isNearWhite(bgColor);
                const bgIsTransparent = !bgColor || isTransparent(bgColor);
                const textIsBlack = isNearBlack(color);

                if (bgIsWhite) {
                    el.style.backgroundColor = 'transparent';
                }

                if (textIsBlack && (bgIsWhite || bgIsTransparent)) {
                    el.style.color = 'var(--widget-text-color)';
                }
            });
        } catch (e) {
            console.error('Error adapting theme:', e);
        }
    }
  </script>
 </body>
</html>
